<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: JSS::APIObject
  
    &mdash; Documentation by YARD 0.8.7.4
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!JSS/APIObject.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (A)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../JSS.html" title="JSS (module)">JSS</a></span></span>
     &raquo; 
    <span class="title">APIObject</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: JSS::APIObject
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">JSS::APIObject</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/jss.rb<span class="defines">,<br />
  lib/jss/api_object.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This class is the parent to all JSS API objects. It provides standard
methods and structures that apply to all API resouces.</p>

<p>See the README.md file for general info about using subclasses of
JSS::APIObject</p>

<h2 id="label-Subclassing">Subclassing</h2>

<h3 id="label-Constructor">Constructor</h3>

<p>In general, subclasses should do any class-specific argument checking
before calling super, and then afterwards, use the contents of @init_data
to populate any class-specific attributes. @id, @name, @rest_rsrc, and
@in_jss are handled here.</p>

<p>If a subclass can be looked up by some key other than :name or :id, the
subclass must pass the keys as an Array in the second argument when calling
super from #initialize. See JSS::Computer#initialize for an example of how
to implement this feature.</p>

<h3 id="label-Object+Creation">Object Creation</h3>

<p>If a subclass should be able to be created in the JSS be sure to include
JSS::Creatable</p>

<p>The constructor should verify any extra required data (aside from :name) in
the args before or after calling super.</p>

<p>See JSS::Creatable for more details.</p>

<h3 id="label-Object+Modification">Object Modification</h3>

<p>If a subclass should be modifiable in the JSS, include JSS::Updatable, q.v.
for details.</p>

<h3 id="label-Object+Deletion">Object Deletion</h3>

<p>All subclasses can be deleted in the JSS.</p>

<h3 id="label-Required+Constants">Required Constants</h3>

<p>Subclasses <strong>must</strong> provide certain Constants in order to
correctly interpret API data and communicate with the API.</p>

<h4 id="label-RSRC_BASE+%3D+%5BString%5D%2C++The+base+for+REST+resources+of+this+class">RSRC_BASE = [String],  The base for REST resources of this class</h4>

<p>e.g. ‘computergroups’ in  “<a
href="https://casper.mycompany.com:8443/JSSResource/computergroups/id/12">casper.mycompany.com:8443/JSSResource/computergroups/id/12</a>”</p>

<h4 id="label-RSRC_LIST_KEY+%3D+%5BSymbol%5D+The+Hash+key+for+the+JSON+list+output+of+all+objects+of+this+class+in+the+JSS.">RSRC_LIST_KEY = [Symbol] The Hash key for the JSON list output of all objects of this class in the JSS.</h4>

<p>e.g. the JSON output of resource “JSSResource/computergroups” is a hash
with one item (an Array of computergroups). That item’s key is the Symbol
:computer_groups</p>

<h4 id="label-RSRC_OBJECT_KEY+%3D+%5BSymbol%5D+The+Hash+key+used+for+individual+JSON+object+output.">RSRC_OBJECT_KEY = [Symbol] The Hash key used for individual JSON object output.</h4>

<p>It’s also used in various error messages</p>

<p>e.g. the JSON output of the resource
“JSSResource/computergroups/id/436” is a hash with one item (another
hash with details of one computergroup). That item’s key is the Symbol
:computer_group</p>

<h4 id="label-VALID_DATA_KEYS+%3D+%5BArray%3CSymbol%3E%5D+The+Hash+keys+used+to+verify+validity+of+%3Adata">VALID_DATA_KEYS = [Array&lt;Symbol&gt;] The Hash keys used to verify validity of :data</h4>

<p>When instantiating a subclass using :data =&gt; somehash, some minimal
checks are performed to ensure the data is valid for the subclass</p>

<p>The Symbols in this Array are compared to the keys of the hash provided. If
any of these don’t exist in the hash’s keys, then the :data is not
valid and an exception is raised.</p>

<p>The keys :id and :name must always exist in the hash. If only :id and :name
are valid, VALID_DATA_KEYS should be an empty array.</p>

<p>e.g. for a department, only :id and :name are valid, so VALID_DATA_KEYS is
an empty Array ([]) but for a computer group, the keys :computers and
:is_smart must be present as well. so VALID_DATA_KEYS will be [:computers,
:is_smart]</p>

<p><strong>NOTE</strong> Some API objects have data broken into subsections,
in which case the VALID_DATA_KEYS are expected in the section :general.</p>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="AdvancedSearch.html" title="JSS::AdvancedSearch (class)">AdvancedSearch</a></span>, <span class='object_link'><a href="Building.html" title="JSS::Building (class)">Building</a></span>, <span class='object_link'><a href="Category.html" title="JSS::Category (class)">Category</a></span>, <span class='object_link'><a href="Computer.html" title="JSS::Computer (class)">Computer</a></span>, <span class='object_link'><a href="Department.html" title="JSS::Department (class)">Department</a></span>, <span class='object_link'><a href="DistributionPoint.html" title="JSS::DistributionPoint (class)">DistributionPoint</a></span>, <span class='object_link'><a href="ExtensionAttribute.html" title="JSS::ExtensionAttribute (class)">ExtensionAttribute</a></span>, <span class='object_link'><a href="Group.html" title="JSS::Group (class)">Group</a></span>, <span class='object_link'><a href="MobileDevice.html" title="JSS::MobileDevice (class)">MobileDevice</a></span>, <span class='object_link'><a href="NetBootServer.html" title="JSS::NetBootServer (class)">NetBootServer</a></span>, <span class='object_link'><a href="NetbootServer.html" title="JSS::NetbootServer (class)">NetbootServer</a></span>, <span class='object_link'><a href="NetworkSegment.html" title="JSS::NetworkSegment (class)">NetworkSegment</a></span>, <span class='object_link'><a href="Package.html" title="JSS::Package (class)">Package</a></span>, <span class='object_link'><a href="Peripheral.html" title="JSS::Peripheral (class)">Peripheral</a></span>, <span class='object_link'><a href="PeripheralType.html" title="JSS::PeripheralType (class)">PeripheralType</a></span>, <span class='object_link'><a href="Policy.html" title="JSS::Policy (class)">Policy</a></span>, <span class='object_link'><a href="RemovableMacAddress.html" title="JSS::RemovableMacAddress (class)">RemovableMacAddress</a></span>, <span class='object_link'><a href="Report.html" title="JSS::Report (class)">Report</a></span>, <span class='object_link'><a href="Script.html" title="JSS::Script (class)">Script</a></span>, <span class='object_link'><a href="SoftwareUpdateServer.html" title="JSS::SoftwareUpdateServer (class)">SoftwareUpdateServer</a></span>, <span class='object_link'><a href="User.html" title="JSS::User (class)">User</a></span></p>
</div>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="REQUIRED_DATA_KEYS-constant" class="">REQUIRED_DATA_KEYS =
          <div class="docstring">
  <div class="discussion">
    
<p>These Symbols are added to VALID_DATA_KEYS for performing the :data
validity test described above.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='comma token'>,</span> <span class='symbol val'>:name</span><span class='rbrack token'>]</span>
</pre></dd>
      
        <dt id="DEFAULT_LOOKUP_KEYS-constant" class="">DEFAULT_LOOKUP_KEYS =
          <div class="docstring">
  <div class="discussion">
    
<p>By default, these keys are available for object lookups Others can be added
by subclasses using an array of them as the second argument to
super(initialize) The keys must be Symbols that  match the keyname in the
resource url. e.g. :serialnumber  for
JSSResource/computers/serialnumber/xxxxx</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='comma token'>,</span> <span class='symbol val'>:name</span><span class='rbrack token'>]</span>
</pre></dd>
      
        <dt id="all_items-classvariable" class="">@@all_items =
          <div class="docstring">
  <div class="discussion">
    
<p>This Hash holds the most recent API query for a list of all items in any
subclass, keyed by the subclass’s RSRC_LIST_KEY. See the self.all class
method.</p>

<p>When the .all method is called without an argument, and this hash has a
matching value, the value is returned, rather than requerying the API. The
first time a class calls .all, or whnever refresh is not false, the API is
queried and the value in this hash is updated.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace token'>{</span><span class='rbrace token'>}</span>
</pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#id-instance_method" title="#id (instance method)">- (Object) <strong>id</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Integer - the JSS id number.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#in_jss-instance_method" title="#in_jss (instance method)">- (Object) <strong>in_jss</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Boolean - is it in the JSS?.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">- (Object) <strong>name</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>String - the name.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#need_to_update-instance_method" title="#need_to_update (instance method)">- (Object) <strong>need_to_update</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Boolean -  need to save any changes?.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#rest_rsrc-instance_method" title="#rest_rsrc (instance method)">- (Object) <strong>rest_rsrc</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>String - the Rest resource for API access (the part after
“JSSResource/” ).</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all-class_method" title="all (class method)">+ (Array&lt;Hash{:name=&gt;String, :id=&gt; Integer}&gt;) <strong>all</strong>(refresh = false) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return an Array of Hashes for all objects of this subclass in the JSS.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_ids-class_method" title="all_ids (class method)">+ (Array&lt;Integer&gt;) <strong>all_ids</strong>(refresh = false) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an Array of the JSS id numbers of all the members of the subclass.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_names-class_method" title="all_names (class method)">+ (Array&lt;String&gt;) <strong>all_names</strong>(refresh = false) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an Array of the JSS names of all the members of the subclass.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#map_all_ids_to-class_method" title="map_all_ids_to (class method)">+ (Hash{Integer =&gt; Oject}) <strong>map_all_ids_to</strong>(other_key, refresh = false) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return a hash of all objects of this subclass in the JSS where the key is
the id, and the value is some other key in the data items returned by the
JSS::APIObject.all.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#xml_list-class_method" title="xml_list (class method)">+ (REXML::Element) <strong>xml_list</strong>(array, content = :name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Convert an Array of Hashes of API object data to a REXML element.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-instance_method" title="#delete (instance method)">- (Object) <strong>delete</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Delete this item from the JSS.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (APIObject) <strong>initialize</strong>(args = {}, other_lookup_keys = []) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>See the JSS::APIObject overview for more details.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="JSS::APIObject (class)">APIObject</a></span></tt>) <strong>initialize</strong>(args = {}, other_lookup_keys = []) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>See the JSS::APIObject overview for more details.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the data for looking up, or constructing, a new object. Must include :id,
:name, or :data.</p>
<ul><li>
<p>:id or :name will be looked up via the API</p>
</li><li><ul><li>
<p>if the subclass includes JSS::Creatable, :id can be :new, to create a new
object in the JSS.</p>
</li></ul>
</li><li>
<p>:data must be the JSON output of a separate API query (a Hash of valid
object data)</p>
</li></ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>other_lookup_keys</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;Symbol&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Hash keys than :id and :name, by which an API lookup may be performed.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object.rb', line 316</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='rubyid_other_lookup_keys identifier id'>other_lookup_keys</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>

  <span class='comment val'>####### Previously looked-up JSON data</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_args identifier id'>args</span><span class='lbrack token'>[</span><span class='symbol val'>:data</span><span class='rbrack token'>]</span>

    <span class='rubyid_@init_data ivar id'>@init_data</span> <span class='assign token'>=</span> <span class='rubyid_args identifier id'>args</span><span class='lbrack token'>[</span><span class='symbol val'>:data</span><span class='rbrack token'>]</span>
    <span class='comment val'>### Does this data come in subsets?</span>
    <span class='rubyid_@got_subsets ivar id'>@got_subsets</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:general</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>

    <span class='comment val'>### data must include all they keys in REQUIRED_DATA_KEYS + VALID_DATA_KEYS</span>
    <span class='comment val'>### in either the main hash keys or the :general sub-hash, if it exists</span>
    <span class='rubyid_hash_to_check identifier id'>hash_to_check</span> <span class='assign token'>=</span> <span class='rubyid_@got_subsets ivar id'>@got_subsets</span> <span class='question op'>?</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:general</span><span class='rbrack token'>]</span> <span class='colon op'>:</span> <span class='rubyid_@init_data ivar id'>@init_data</span>
    <span class='rubyid_combined_valid_keys identifier id'>combined_valid_keys</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='label val'>class::</span><span class='rubyid_REQUIRED_DATA_KEYS constant id'>REQUIRED_DATA_KEYS</span> <span class='plus op'>+</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='label val'>class::</span><span class='rubyid_VALID_DATA_KEYS constant id'>VALID_DATA_KEYS</span>
    <span class='rubyid_keys_ok identifier id'>keys_ok</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='rubyid_hash_to_check identifier id'>hash_to_check</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span> <span class='bitand op'>&amp;</span> <span class='rubyid_combined_valid_keys identifier id'>combined_valid_keys</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_count identifier id'>count</span> <span class='eq op'>==</span> <span class='rubyid_combined_valid_keys identifier id'>combined_valid_keys</span><span class='dot token'>.</span><span class='rubyid_count identifier id'>count</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_InvalidDataError constant id'>InvalidDataError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;:data is not valid JSON for a #{self.class::RSRC_OBJECT_KEY} from the API. It needs at least the keys :#{combined_valid_keys.join ', :'}&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_keys_ok identifier id'>keys_ok</span>

    <span class='comment val'>### and the id must be in the jss</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_NoSuchItemError constant id'>NoSuchItemError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;No #{self.class::RSRC_OBJECT_KEY} with JSS id: #{@init_data[:id]}&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span>  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_class identifier id'>class</span><span class='dot token'>.</span><span class='rubyid_all_ids identifier id'>all_ids</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span> <span class='rubyid_hash_to_check identifier id'>hash_to_check</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span>


  <span class='comment val'>###### Make a new one in the JSS, but only if we've included the Creatable module</span>
  <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_args identifier id'>args</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='symbol val'>:new</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_UnsupportedError constant id'>UnsupportedError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Creating or editing #{self.class::RSRC_LIST_KEY} isn't yet supported. Please use other Casper workflows.&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='label val'>class::</span><span class='rubyid_CREATABLE constant id'>CREATABLE</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_MissingDataError constant id'>MissingDataError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;You must provide a :name for a new #{self.class::RSRC_OBJECT_KEY}.&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_args identifier id'>args</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_AlreadyExistsError constant id'>AlreadyExistsError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;A #{self.class::RSRC_OBJECT_KEY} already exists with the name '#{args[:name]}'&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_class identifier id'>class</span><span class='dot token'>.</span><span class='rubyid_all_names identifier id'>all_names</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span> <span class='rubyid_args identifier id'>args</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span>


    <span class='comment val'>### NOTE: subclasses may want to pre-populate more keys in @init_data when :id == :new</span>
    <span class='comment val'>### then parse them into attributes later.</span>
    <span class='rubyid_@init_data ivar id'>@init_data</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span>
      <span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_args identifier id'>args</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span>
    <span class='rbrace token'>}</span>

  <span class='comment val'>###### Look up the data via the API</span>
  <span class='rubyid_else else kw'>else</span>
    <span class='comment val'>### what lookup key are we using?</span>
    <span class='rubyid_combined_lookup_keys identifier id'>combined_lookup_keys</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='label val'>class::</span><span class='rubyid_DEFAULT_LOOKUP_KEYS constant id'>DEFAULT_LOOKUP_KEYS</span> <span class='plus op'>+</span> <span class='rubyid_other_lookup_keys identifier id'>other_lookup_keys</span>
    <span class='rubyid_lookup_key identifier id'>lookup_key</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='rubyid_combined_lookup_keys identifier id'>combined_lookup_keys</span> <span class='bitand op'>&amp;</span> <span class='rubyid_args identifier id'>args</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>

    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_MissingDataError constant id'>MissingDataError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Args must include :#{combined_lookup_keys.join(', :')}, or :data&quot;</span>  <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_lookup_key identifier id'>lookup_key</span>

    <span class='rubyid_rsrc identifier id'>rsrc</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{self.class::RSRC_BASE}/#{lookup_key}/#{args[lookup_key]}&quot;</span>

    <span class='rubyid_begin begin kw'>begin</span>
      <span class='rubyid_@init_data ivar id'>@init_data</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_API constant id'>API</span><span class='dot token'>.</span><span class='rubyid_get_rsrc identifier id'>get_rsrc</span><span class='lparen token'>(</span><span class='rubyid_rsrc identifier id'>rsrc</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='label val'>class::</span><span class='rubyid_RSRC_OBJECT_KEY constant id'>RSRC_OBJECT_KEY</span><span class='rbrack token'>]</span>
      <span class='comment val'>### Does this data come in subsets?</span>
      <span class='rubyid_@got_subsets ivar id'>@got_subsets</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:general</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_RestClient constant id'>RestClient</span><span class='colon2 op'>::</span><span class='rubyid_ResourceNotFound constant id'>ResourceNotFound</span>
      <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_NoSuchItemError constant id'>NoSuchItemError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;No #{self.class::RSRC_OBJECT_KEY} found matching: #{args[:name] ? args[:name] : args[:id]}&quot;</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span> <span class='comment val'>## end arg parsing</span>

  <span class='comment val'>### set the name and id, and remove empty strings</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_@got_subsets ivar id'>@got_subsets</span>
    <span class='rubyid_@id ivar id'>@id</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:general</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span>
    <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:general</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span>
    <span class='rubyid_@site ivar id'>@site</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:general</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:site</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_NO_SITE constant id'>NO_SITE</span>
    <span class='rubyid_@init_data ivar id'>@init_data</span><span class='dot token'>.</span><span class='rubyid_each_pair identifier id'>each_pair</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span><span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_v identifier id'>v</span><span class='dot token'>.</span><span class='rubyid_kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
        <span class='rubyid_v identifier id'>v</span><span class='dot token'>.</span><span class='rubyid_delete_if identifier id'>delete_if</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_kk identifier id'>kk</span><span class='comma token'>,</span><span class='rubyid_vv identifier id'>vv</span><span class='bitor op'>|</span> <span class='rubyid_vv identifier id'>vv</span> <span class='eq op'>==</span> <span class='string val'>''</span><span class='rbrace token'>}</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_v identifier id'>v</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_v identifier id'>v</span> <span class='eq op'>==</span> <span class='string val'>''</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_else else kw'>else</span> <span class='comment val'># no subsets</span>
    <span class='rubyid_@id ivar id'>@id</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span>
    <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span>
    <span class='rubyid_@site ivar id'>@site</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:site</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_NO_SITE constant id'>NO_SITE</span>
    <span class='rubyid_@init_data ivar id'>@init_data</span><span class='dot token'>.</span><span class='rubyid_delete_if identifier id'>delete_if</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span><span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span> <span class='rubyid_v identifier id'>v</span> <span class='eq op'>==</span> <span class='string val'>''</span><span class='rbrace token'>}</span>

  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'>### if we have a @id here, we're already in the JSS</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_@id ivar id'>@id</span>
    <span class='rubyid_@in_jss ivar id'>@in_jss</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span>
    <span class='rubyid_@rest_rsrc ivar id'>@rest_rsrc</span> <span class='assign token'>=</span>  <span class='dstring node'>&quot;#{self.class::RSRC_BASE}/id/#{@id}&quot;</span>
    <span class='rubyid_@need_to_update ivar id'>@need_to_update</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span>
  <span class='rubyid_else else kw'>else</span>
    <span class='rubyid_@in_jss ivar id'>@in_jss</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span>
    <span class='rubyid_@rest_rsrc ivar id'>@rest_rsrc</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{self.class::RSRC_BASE}/name/#{URI.escape @name}&quot;</span>
    <span class='rubyid_@need_to_update ivar id'>@need_to_update</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span>
  <span class='rubyid_end end kw'>end</span>

<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="id-instance_method">
  
    - (<tt>Object</tt>) <strong>id</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Integer - the JSS id number</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


286
287
288</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object.rb', line 286</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_id identifier id'>id</span>
  <span class='rubyid_@id ivar id'>@id</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="in_jss-instance_method">
  
    - (<tt>Object</tt>) <strong>in_jss</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Boolean - is it in the JSS?</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


292
293
294</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object.rb', line 292</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_in_jss identifier id'>in_jss</span>
  <span class='rubyid_@in_jss ivar id'>@in_jss</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    - (<tt>Object</tt>) <strong>name</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>String - the name</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


289
290
291</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object.rb', line 289</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span>
  <span class='rubyid_@name ivar id'>@name</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="need_to_update-instance_method">
  
    - (<tt>Object</tt>) <strong>need_to_update</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Boolean -  need to save any changes?</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


295
296
297</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object.rb', line 295</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_need_to_update identifier id'>need_to_update</span>
  <span class='rubyid_@need_to_update ivar id'>@need_to_update</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="rest_rsrc-instance_method">
  
    - (<tt>Object</tt>) <strong>rest_rsrc</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>String - the Rest resource for API access (the part after
“JSSResource/” )</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


299
300
301</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object.rb', line 299</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_rest_rsrc identifier id'>rest_rsrc</span>
  <span class='rubyid_@rest_rsrc ivar id'>@rest_rsrc</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="all-class_method">
  
    + (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>{:name=&gt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>, :id=&gt; Integer}&gt;</tt>) <strong>all</strong>(refresh = false) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return an Array of Hashes for all objects of this subclass in the JSS.</p>

<p>This method is only valid in subclasses of JSS::APIObject, and is the
parsed JSON output of an API query for the resource defined in the
subclass’s RSRC_BASE, e.g. for JSS::Computer, with the RSRC_BASE of
:computers, This method retuens the output of the
‘JSSResource/computers’ resource, which is a list of all computers in
the JSS.</p>

<p>Each item in the Array is a Hash with at least two keys, :id and :name. The
class methods .all_ids and .all_names provide easier access to those data
as mapped Arrays.</p>

<p>Some API classes provide other data in each Hash, e.g. :udid (for computers
and mobile devices) or :is_smart (for groups).</p>

<p>Subclasses implementing those API classes should provide .all_xxx class
methods for accessing those other values as mapped Arrays, e.g.
JSS::Computer.all_udids</p>

<p>The results of the first query for each subclass is stored in @@all_items
and returned at every future call, so as to not requery the server every
time.</p>

<p>To force requerying to get updated data, provided a non-false argument. I
usually use :refresh, so that it’s obvious what I’m doing, but true, 1,
or anything besides false or nil will work.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>refresh</span>
      
      
        <span class='type'>(<tt>true</tt>, <tt>false</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>should the data be re-queried from the API?</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>{:name=&gt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>, :id=&gt; Integer}&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="UnsupportedError.html" title="JSS::UnsupportedError (class)">JSS::UnsupportedError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


145
146
147
148
149
150</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object.rb', line 145</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_all identifier id'>all</span><span class='lparen token'>(</span><span class='rubyid_refresh identifier id'>refresh</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span><span class='rparen token'>)</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_UnsupportedError constant id'>UnsupportedError</span><span class='comma token'>,</span> <span class='string val'>&quot;.all can only be called on subclasses of JSS::APIObject&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_self self kw'>self</span> <span class='eq op'>==</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_APIObject constant id'>APIObject</span>
  <span class='rubyid_@@all_items ivar id'>@@all_items</span><span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='colon2 op'>::</span><span class='rubyid_RSRC_LIST_KEY constant id'>RSRC_LIST_KEY</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_refresh identifier id'>refresh</span>
  <span class='rubyid_return return kw'>return</span> <span class='rubyid_@@all_items ivar id'>@@all_items</span><span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='colon2 op'>::</span><span class='rubyid_RSRC_LIST_KEY constant id'>RSRC_LIST_KEY</span><span class='rbrack token'>]</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@@all_items ivar id'>@@all_items</span><span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='colon2 op'>::</span><span class='rubyid_RSRC_LIST_KEY constant id'>RSRC_LIST_KEY</span><span class='rbrack token'>]</span>
  <span class='rubyid_@@all_items ivar id'>@@all_items</span><span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='colon2 op'>::</span><span class='rubyid_RSRC_LIST_KEY constant id'>RSRC_LIST_KEY</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_API constant id'>API</span><span class='dot token'>.</span><span class='rubyid_get_rsrc identifier id'>get_rsrc</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='colon2 op'>::</span><span class='rubyid_RSRC_BASE constant id'>RSRC_BASE</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='rubyid_self self kw'>self</span><span class='colon2 op'>::</span><span class='rubyid_RSRC_LIST_KEY constant id'>RSRC_LIST_KEY</span><span class='rbrack token'>]</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_ids-class_method">
  
    + (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;Integer&gt;</tt>) <strong>all_ids</strong>(refresh = false) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an Array of the JSS id numbers of all the members of the subclass.</p>

<p>e.g. When called from subclass JSS::Computer, returns the id’s of all
computers in the JSS</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>refresh</span>
      
      
        <span class='type'>(<tt>true</tt>, <tt>false</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>should the data be re-queried from the API?</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;Integer&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the ids of all items of this subclass in the JSS</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object.rb', line 163</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_all_ids identifier id'>all_ids</span><span class='lparen token'>(</span><span class='rubyid_refresh identifier id'>refresh</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span><span class='rparen token'>)</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_all identifier id'>all</span><span class='lparen token'>(</span><span class='rubyid_refresh identifier id'>refresh</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_map identifier id'>map</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_i identifier id'>i</span><span class='bitor op'>|</span> <span class='rubyid_i identifier id'>i</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_names-class_method">
  
    + (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>) <strong>all_names</strong>(refresh = false) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an Array of the JSS names of all the members of the subclass.</p>

<p>e.g. When called from subclass JSS::Computer, returns the names of all
computers in the JSS</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>refresh</span>
      
      
        <span class='type'>(<tt>true</tt>, <tt>false</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>should the data be re-queried from the API?</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the names of all item of this subclass in the JSS</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


178
179
180</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object.rb', line 178</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_all_names identifier id'>all_names</span><span class='lparen token'>(</span><span class='rubyid_refresh identifier id'>refresh</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span><span class='rparen token'>)</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_all identifier id'>all</span><span class='lparen token'>(</span><span class='rubyid_refresh identifier id'>refresh</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_map identifier id'>map</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_i identifier id'>i</span><span class='bitor op'>|</span> <span class='rubyid_i identifier id'>i</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="map_all_ids_to-class_method">
  
    + (<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>{Integer =&gt; Oject}</tt>) <strong>map_all_ids_to</strong>(other_key, refresh = false) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return a hash of all objects of this subclass in the JSS where the key is
the id, and the value is some other key in the data items returned by the
JSS::APIObject.all.</p>

<p>If the other key doesn’t exist in the API data, (eg :udid for
JSS::Department) the values will be nil.</p>

<p>Use this method to map ID numbers to other identifiers returned by the API
list resources. Invert its result to map the other identfier to ids.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_Computer constant id'>Computer</span><span class='dot token'>.</span><span class='rubyid_map_all_ids_to identifier id'>map_all_ids_to</span><span class='lparen token'>(</span><span class='symbol val'>:name</span><span class='rparen token'>)</span>

<span class='comment val'># Returns, eg {2 =&gt; &quot;kimchi&quot;, 5 =&gt; &quot;mantis&quot;}</span>

<span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_Computer constant id'>Computer</span><span class='dot token'>.</span><span class='rubyid_map_all_ids_to identifier id'>map_all_ids_to</span><span class='lparen token'>(</span><span class='symbol val'>:name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_invert identifier id'>invert</span>

<span class='comment val'># Returns, eg {&quot;kimchi&quot; =&gt; 2, &quot;mantis&quot; =&gt; 5}</span>
</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>other_key</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the other data key with which to associate each id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>refresh</span>
      
      
        <span class='type'>(<tt>true</tt>, <tt>false</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>should the data  re-queried from the API?</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>{Integer =&gt; Oject}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the associated ids and data</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


208
209
210
211
212</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object.rb', line 208</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_map_all_ids_to identifier id'>map_all_ids_to</span><span class='lparen token'>(</span><span class='rubyid_other_key identifier id'>other_key</span><span class='comma token'>,</span> <span class='rubyid_refresh identifier id'>refresh</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span><span class='rparen token'>)</span>
  <span class='rubyid_h identifier id'>h</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_all identifier id'>all</span><span class='lparen token'>(</span><span class='rubyid_refresh identifier id'>refresh</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_i identifier id'>i</span><span class='bitor op'>|</span> <span class='rubyid_h identifier id'>h</span><span class='lbrack token'>[</span><span class='rubyid_i identifier id'>i</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_i identifier id'>i</span><span class='lbrack token'>[</span><span class='rubyid_other_key identifier id'>other_key</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span>
  <span class='rubyid_h identifier id'>h</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="xml_list-class_method">
  
    + (<tt>REXML::Element</tt>) <strong>xml_list</strong>(array, content = :name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Convert an Array of Hashes of API object data to a REXML element.</p>

<p>Given an Array of Hashes of items in the subclass where each Hash has at
least an :id  or a :name key, (as what comes from the .all class method)
return a REXML &lt;classes&gt; element with one &lt;class&gt; element per
Hash member.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='comment val'># for class JSS::Computer</span>
<span class='rubyid_some_comps identifier id'>some_comps</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='lbrace token'>{</span><span class='symbol val'>:id=</span><span class='gt op'>&gt;</span><span class='integer val'>2</span><span class='comma token'>,</span> <span class='symbol val'>:name=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;kimchi&quot;</span><span class='rbrace token'>}</span><span class='comma token'>,</span><span class='lbrace token'>{</span><span class='symbol val'>:id=</span><span class='gt op'>&gt;</span><span class='integer val'>5</span><span class='comma token'>,</span> <span class='symbol val'>:name=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;mantis&quot;</span><span class='rbrace token'>}</span><span class='rbrack token'>]</span>
<span class='rubyid_xml_names identifier id'>xml_names</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_Computer constant id'>Computer</span><span class='dot token'>.</span><span class='rubyid_xml_list identifier id'>xml_list</span> <span class='rubyid_some_comps identifier id'>some_comps</span>
<span class='rubyid_puts identifier id'>puts</span> <span class='rubyid_xml_names identifier id'>xml_names</span>  <span class='comment val'># output manually formatted for clarity, xml.to_s has no newlines between elements</span>

<span class='lt op'>&lt;</span><span class='rubyid_computers identifier id'>computers</span><span class='gt op'>&gt;</span>
  <span class='lt op'>&lt;</span><span class='rubyid_computer identifier id'>computer</span><span class='gt op'>&gt;</span>
    <span class='lt op'>&lt;</span><span class='rubyid_name identifier id'>name</span><span class='gt op'>&gt;</span><span class='rubyid_kimchi identifier id'>kimchi</span><span class='lt op'>&lt;</span><span class='regexp val'>/name&gt;
  &lt;/</span><span class='rubyid_computer identifier id'>computer</span><span class='gt op'>&gt;</span>
  <span class='lt op'>&lt;</span><span class='rubyid_computer identifier id'>computer</span><span class='gt op'>&gt;</span>
    <span class='lt op'>&lt;</span><span class='rubyid_name identifier id'>name</span><span class='gt op'>&gt;</span><span class='rubyid_mantis identifier id'>mantis</span><span class='lt op'>&lt;</span><span class='regexp val'>/name&gt;
  &lt;/</span><span class='rubyid_computer identifier id'>computer</span><span class='gt op'>&gt;</span>
<span class='lt op'>&lt;</span><span class='regexp val'>/computers&gt;

xml_ids = JSS::Computer.xml_list some_comps, :id
puts xml_names  # output manually formatted for clarity, xml.to_s has no newlines between elements

&lt;computers&gt;
  &lt;computer&gt;
    &lt;id&gt;2&lt;/i</span><span class='rubyid_d identifier id'>d</span><span class='gt op'>&gt;</span>
  <span class='lt op'>&lt;</span><span class='regexp val'>/computer&gt;
  &lt;computer&gt;
    &lt;id&gt;5&lt;/i</span><span class='rubyid_d identifier id'>d</span><span class='gt op'>&gt;</span>
  <span class='lt op'>&lt;</span><span class='regexp val'>/computer&gt;
&lt;/</span><span class='rubyid_computers identifier id'>computers</span><span class='gt op'>&gt;</span>
</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>array</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>{:name=&gt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>, :id =&gt;Integer, Symbol=&gt;#to_s}&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the Array of subclass data to convert</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>content</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:name</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the Hash key to use as the inner element for each member of the Array</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>REXML::Element</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the XML element representing the data</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


256
257
258</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object.rb', line 256</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_xml_list identifier id'>xml_list</span><span class='lparen token'>(</span><span class='rubyid_array identifier id'>array</span><span class='comma token'>,</span> <span class='rubyid_content identifier id'>content</span> <span class='assign token'>=</span> <span class='symbol val'>:name</span><span class='rparen token'>)</span>
  <span class='rubyid_JSS constant id'>JSS</span><span class='dot token'>.</span><span class='rubyid_item_list_to_rexml_list identifier id'>item_list_to_rexml_list</span> <span class='rubyid_self self kw'>self</span><span class='colon2 op'>::</span><span class='rubyid_RSRC_LIST_KEY constant id'>RSRC_LIST_KEY</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='colon2 op'>::</span><span class='rubyid_RSRC_OBJECT_KEY constant id'>RSRC_OBJECT_KEY</span><span class='comma token'>,</span> <span class='rubyid_array identifier id'>array</span><span class='comma token'>,</span> <span class='rubyid_content identifier id'>content</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="delete-instance_method">
  
    - (<tt>Object</tt>) <strong>delete</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Delete this item from the JSS.</p>

<p>Subclasses may want to redefine this method, first calling super, then
setting other attributes to nil, false, empty, etc..</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


416
417
418
419
420
421
422
423</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object.rb', line 416</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_delete identifier id'>delete</span>
  <span class='rubyid_return return kw'>return</span> <span class='rubyid_nil nil kw'>nil</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_@in_jss ivar id'>@in_jss</span>
  <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_API constant id'>API</span><span class='dot token'>.</span><span class='rubyid_delete_rsrc identifier id'>delete_rsrc</span> <span class='rubyid_@rest_rsrc ivar id'>@rest_rsrc</span>
  <span class='rubyid_@rest_rsrc ivar id'>@rest_rsrc</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{self.class::RSRC_BASE}/name/#{URI.escape @name}&quot;</span>
  <span class='rubyid_@id ivar id'>@id</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span>
  <span class='rubyid_@in_jss ivar id'>@in_jss</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span>
  <span class='rubyid_@need_to_update ivar id'>@need_to_update</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Fri Jul 18 15:10:58 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.4 (ruby-1.8.7).
</div>

  </body>
</html>
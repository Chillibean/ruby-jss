<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  File: README
  
    &mdash; Documentation by YARD 0.8.7.4
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!file.README.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><h1>JSS</h1>

<h2>DESCRIPTION</h2>

<p>JSS is a Ruby gem providing access to the REST API of JAMF Software&#39;s Casper Suite. It abstracts API resources 
as Ruby objects, and provides methods for interacting with those resources. It also provides some features that 
aren&#39;t a part of the API, but come with other Casper-related tools, such as uploading .pkg and .dmg JSS::Package 
data to the master distribution point, and the installation of JSS::Package objects on client machines.</p>

<p>The gem is not a complete implementation of the Casper API. Only some API objects are modeled, and some of 
those are read-only, some partially writable, some fully read-write. See OBJECTS IMPLEMENTED for a list.</p>

<h2>SYNOPSIS</h2>

<pre class="code ruby"><code class="ruby"><span class='rubyid_require identifier id'>require</span> <span class='string val'>'jss'</span>

<span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_API constant id'>API</span><span class='dot token'>.</span><span class='rubyid_connect identifier id'>connect</span> <span class='symbol val'>:user</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_jss_user identifier id'>jss_user</span><span class='comma token'>,</span> <span class='symbol val'>:pw</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_jss_user_pw identifier id'>jss_user_pw</span><span class='comma token'>,</span> <span class='symbol val'>:server</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_jss_server_hostname identifier id'>jss_server_hostname</span>

<span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_Package constant id'>Package</span><span class='dot token'>.</span><span class='rubyid_all identifier id'>all</span> <span class='comment val'># returns an array of data about all JSS::Package objects in the JSS</span>
<span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_Package constant id'>Package</span><span class='dot token'>.</span><span class='rubyid_all_names identifier id'>all_names</span> <span class='comment val'># returns an array of names of all JSS::Package objects in the JSS</span>

<span class='comment val'># Get a static computer group</span>
<span class='rubyid_mg identifier id'>mg</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_ComputerGroup constant id'>ComputerGroup</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span> <span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Macs of interest&quot;</span>

<span class='comment val'># Add a computer to the group</span>
<span class='rubyid_mg identifier id'>mg</span><span class='dot token'>.</span><span class='rubyid_add_member identifier id'>add_member</span> <span class='string val'>&quot;pricklepants&quot;</span>

<span class='comment val'># save my changes</span>
<span class='rubyid_mg identifier id'>mg</span><span class='dot token'>.</span><span class='rubyid_update identifier id'>update</span>

<span class='comment val'># Create a new network segment to store in the JSS</span>
<span class='rubyid_ns identifier id'>ns</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_NetworkSegment constant id'>NetworkSegment</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span> <span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:new</span><span class='comma token'>,</span> <span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'Private Class C'</span><span class='comma token'>,</span> <span class='symbol val'>:starting_address</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'192.168.0.0'</span><span class='comma token'>,</span> <span class='symbol val'>:ending_address</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'192.168.0.255'</span>

<span class='comment val'># Associate this network segment with a specific building, which must exist in the JSS, and be listed in JSS::Building.all_names</span>
<span class='rubyid_ns identifier id'>ns</span><span class='dot token'>.</span><span class='rubyid_building identifier id'>building</span> <span class='assign token'>=</span> <span class='string val'>&quot;Main Office&quot;</span> 

<span class='comment val'># Associate this network segment with a specific software update server, which must exist in the JSS, </span>
<span class='comment val'># and be listed in JSS::SoftwareUpdateServer.all_names</span>
<span class='rubyid_ns identifier id'>ns</span><span class='dot token'>.</span><span class='rubyid_swu_server identifier id'>swu_server</span> <span class='assign token'>=</span> <span class='string val'>&quot;Main SWU Server&quot;</span> 

<span class='comment val'># Store the new network segment in the JSS</span>
<span class='rubyid_ns identifier id'>ns</span><span class='dot token'>.</span><span class='rubyid_create identifier id'>create</span> 
</code></pre>

<h2>USAGE</h2>

<h3>Connecting to the API</h3>

<p>Before you can work with JSS Objects via the API, you have to connect to it. </p>

<p>The constant JSS::API contains the connection to the API (a singleton instance of JSS::APIConnection). When the JSS Module is first loaded, it isn&#39;t 
connected.  To remedy that, use JSS::API.connect, passing it values for :user, :pw, and :server:</p>

<pre class="code ruby"><code class="ruby"><span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_API constant id'>API</span><span class='dot token'>.</span><span class='rubyid_connect identifier id'>connect</span> <span class='symbol val'>:user</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_jss_user identifier id'>jss_user</span><span class='comma token'>,</span> <span class='symbol val'>:pw</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_jss_user_pw identifier id'>jss_user_pw</span><span class='comma token'>,</span> <span class='symbol val'>:server</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_jss_server_hostname identifier id'>jss_server_hostname</span>
</code></pre>

<p>Make sure the user has privileges to do things with JSS Objects. See the JSS::APIConnection class for more details about its methods.</p>

<h3>Working with JSS Objects (a.k.a REST Resources)</h3>

<p>All API Object classes are subclasses of JSS::APIObject and share methods for listing, retrieving, and deleting from the JSS. All supported objects can be listed, retrieved and deleted, but only some can be updated or created. Those classes do so by mixing in the JSS::Creatable and/or JSS::Updateable modules. See below for the level of implementation of each class. </p>

<hr>

<h4>Listing Objects</h4>

<p>To get an Array of every object in the JSS of some Class, call that Class&#39;s .all method:</p>

<pre class="code ruby"><code class="ruby"><span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_Computer constant id'>Computer</span><span class='dot token'>.</span><span class='rubyid_all identifier id'>all</span> <span class='comment val'># =&gt; [{:name=&gt;&quot;cephei&quot;, :id=&gt;62},{:name=&gt;&quot;peterparker&quot;, :id=&gt;218}, {:name=&gt;&quot;rowdy&quot;, :id=&gt;901}, ...]</span>
</code></pre>

<p>The Array will contain a Hash for each item, with at least a :name and an :id.  Some classes provide more data for each item.
To get just the names or just the ids in an Array, use the .all_names or .all_ids Class method</p>

<pre class="code ruby"><code class="ruby"><span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_Computer constant id'>Computer</span><span class='dot token'>.</span><span class='rubyid_all_names identifier id'>all_names</span> <span class='comment val'># =&gt;  [&quot;cephei&quot;, &quot;peterparker&quot;, &quot;rowdy&quot;, ...]</span>
<span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_Computer constant id'>Computer</span><span class='dot token'>.</span><span class='rubyid_all_ids identifier id'>all_ids</span> <span class='comment val'># =&gt;  [62, 218, 901, ...]</span>
</code></pre>

<p>Some Classes provide other ways to list objects, depending on the data available, e.g. JSS::MobileDevice.all_udids</p>

<hr>

<h4>Retrieving Objects</h4>

<p>To retrieve a single object call the object&#39;s constructor (.new) and provide either :name or :id or :data.</p>

<ul>
<li>:name or :id will be looked up via the API</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='rubyid_a_dept identifier id'>a_dept</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_Department constant id'>Department</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span> <span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Payroll&quot;</span> <span class='comment val'># =&gt;  #&lt;JSS::Department:0x10b4c0818...</span>
</code></pre>

<ul>
<li>:data must be the parsed JSON output of a separate API query (a hash with symbolized keys)</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='rubyid_dept_data identifier id'>dept_data</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_API constant id'>API</span><span class='dot token'>.</span><span class='rubyid_get_rsrc identifier id'>get_rsrc</span><span class='lparen token'>(</span><span class='string val'>&quot;departments/name/Payroll&quot;</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='symbol val'>:department</span><span class='rbrack token'>]</span> <span class='comment val'># =&gt; {:name=&gt;&quot;Payroll&quot;, :id=&gt;42}</span>
<span class='rubyid_a_dept identifier id'>a_dept</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_Department constant id'>Department</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span> <span class='symbol val'>:data</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_dept_data identifier id'>dept_data</span>  <span class='comment val'># =&gt;  #&lt;JSS::Department:0x10b4a83f8...</span>
</code></pre>

<p>Some subclasses can use more than just the :id and :name keys for lookups, e.g. computers can be looked up with :udid, :serial_number, or :mac_address.</p>

<hr>

<h4>Creating Objects</h4>

<p>Some Objects can be created anew in the JSS. To make a new object, first instantiate one using :id =&gt; :new, and provide a unique :name.</p>

<pre class="code ruby"><code class="ruby"><span class='rubyid_new_pkg identifier id'>new_pkg</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_Package constant id'>Package</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span> <span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:new</span><span class='comma token'>,</span> <span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;transmogrifier-2.3-1.pkg&quot;</span>
</code></pre>

<p>Then set the attributes of the new object as needed</p>

<pre class="code ruby"><code class="ruby"><span class='rubyid_new_pkg identifier id'>new_pkg</span><span class='dot token'>.</span><span class='rubyid_reboot_required identifier id'>reboot_required</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span>
<span class='rubyid_new_pkg identifier id'>new_pkg</span><span class='dot token'>.</span><span class='rubyid_category identifier id'>category</span> <span class='assign token'>=</span> <span class='string val'>&quot;CoolTools&quot;</span>
<span class='comment val'># etc..</span>
</code></pre>

<p>Then use the #create method to create it in the JSS.</p>

<pre class="code ruby"><code class="ruby"><span class='rubyid_new_pkg identifier id'>new_pkg</span><span class='dot token'>.</span><span class='rubyid_create identifier id'>create</span> <span class='comment val'># =&gt; 453 # the id number of the object just created</span>
</code></pre>

<p><em>NOTE</em> some subclasses require more data than just a :name when instantiating with :id =&gt; :new.</p>

<hr>

<h4>Updating Objects</h4>

<p>Some objects can be modified in the JSS.</p>

<pre class="code ruby"><code class="ruby"><span class='rubyid_existing_script identifier id'>existing_script</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_Script constant id'>Script</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span> <span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>321</span>
<span class='rubyid_existing_script identifier id'>existing_script</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='string val'>&quot;transmogrifier-2.3-1.post-install&quot;</span>
</code></pre>

<p>After changing any attributes, use the #update method (also aliased to #save) to push the changes to the JSS.</p>

<pre class="code ruby"><code class="ruby"><span class='rubyid_existing_script identifier id'>existing_script</span><span class='dot token'>.</span><span class='rubyid_update identifier id'>update</span> <span class='comment val'># or existing_script.save  =&gt; true # the update was successful</span>
</code></pre>

<hr>

<h4>Deleting Objects</h4>

<p>To delete an object, just call its #delete method</p>

<pre class="code ruby"><code class="ruby"><span class='rubyid_existing_script identifier id'>existing_script</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_Script constant id'>Script</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span> <span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>321</span>
<span class='rubyid_existing_script identifier id'>existing_script</span><span class='dot token'>.</span><span class='rubyid_delete identifier id'>delete</span> <span class='comment val'># =&gt; true # the delete was successful</span>
</code></pre>

<p>See JSS::APIObject, the parent class of all API resources, for general information about creating, reading, updating/saving, and deleting resources.</p>

<p>See the individual subclasses for any details specific to them.</p>

<p>Other useful classes:</p>

<ul>
<li>JSS::Server - An encapsulation of some info about the server, such as the JSS version and license. An instance is available as an attribute of the JSS::APIConnection singleton.</li>
<li>JSS::Client - An object representing the local machine as a Casper-managed client, and JAMF-related info and methods</li>
</ul>

<h2>OBJECTS IMPLEMENTED</h2>

<p>See each Class&#39;s documentation for details.</p>

<h3>Creatable and Updatable</h3>

<ul>
<li>AdvancedComputerSearch</li>
<li>AdvancedMobileDeviceSearch</li>
<li>AdvancedUserSearch</li>
<li>Building</li>
<li>Category</li>
<li>ComputerExtensionAttribute</li>
<li>ComputerGroup</li>
<li>Department</li>
<li>MobileDeviceExtensionAttribute</li>
<li>MobileDeviceGroup</li>
<li>NetworkSegment</li>
<li>Package</li>
<li>Peripheral</li>
<li>PeripheralType</li>
<li>RemovableMacAddress</li>
<li>Script</li>
<li>User</li>
<li>UserExtensionAttribute</li>
<li>UserGroup</li>
</ul>

<h3>Updatable but not Creatable</h3>

<ul>
<li>Computer - limited to modifying

<ul>
<li>name</li>
<li>mac addresses</li>
<li>barcodes</li>
<li>asset tag</li>
<li>ip address</li>
<li>udid</li>
<li>location data</li>
<li>purchasing data</li>
</ul></li>
<li>MobileDevice - limited to modifying

<ul>
<li>asset tag</li>
<li>location data</li>
<li>purchasing data</li>
</ul></li>
<li>Policy - limited  to modifying

<ul>
<li>Scope (see JSS::Scopable::Scope)</li>
<li>name</li>
<li>enabled</li>
<li>category</li>
<li>triggers</li>
<li>file &amp; process actions</li>
</ul></li>
</ul>

<p><strong>NOTE</strong> Even in the API and the WebApp, Computer and Mobile Device data gathered by an Inventory Upate (a.k.a. &#39;recon&#39;) is not editable.</p>

<h3>Read-Only</h3>

<p>These must be created and edited via the JSS WebApp</p>

<ul>
<li>DistribuitionPoint</li>
<li>NetbootServer</li>
<li><p>SoftwareUpdateServer</p></li>
<li><p>ComputerReport - these are defined by their matching AdvancedComputerSearch</p></li>
</ul>

<h3>Deletable</h3>

<p>All supported API Objects can be deleted</p>

<h2>REQUIREMENTS</h2>

<p>JSS was written for ruby 1.8.7 and 2.0.0, the two versions that come with OS X 10.9.</p>

<p>It also requires these gems, which will be installed automatically if you install JSS with <code>gem install</code></p>

<ul>
<li>rest-client &gt;=1.6.7 <a href="http://rubygems.org/gems/rest-client">http://rubygems.org/gems/rest-client</a></li>
<li>json or json_pure &gt;= 1.6.5 <a href="http://rubygems.org/gems/json">http://rubygems.org/gems/json</a> or <a href="http://rubygems.org/gems/json%5C_pure">http://rubygems.org/gems/json\_pure</a>

<ul>
<li>(only in ruby 1.8.7.  Ruby 2.0.0 has json in its standard library)</li>
</ul></li>
<li>ruby-mysql &gt;= 2.9.12

<ul>
<li>(only for a few things that still require direct SQL access to the JSS database)</li>
</ul></li>
</ul>

<h2>INSTALL</h2>

<p><code>gem install jss</code></p>

<h2>RUNNING TESTS</h2>

<p>Totally automated tests are not really an option since you must connect to a JSS API, and once connected, it&#39;s impossible to assume what might be 
defined there.</p>

<p>There is a tiny stub of test that only check the ability to connect and to basic REST transactions. Eventually I may try to write more that are generally 
runnable, interactively, on any JSS</p>

<h2>LICENSE</h2>

<p>I have yet to chat with Legal about getting this thing opensourced.</p>
</div></div>

    <div id="footer">
  Generated on Fri Jul 18 15:10:54 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.4 (ruby-1.8.7).
</div>

  </body>
</html>